const io = require('socket.io-client');

const socket = io('http://localhost:3001');

socket.on('connect', () => {
    console.log('ğŸ’¬ ì°Œê°œì˜ ì œëŒ€ë¡œ ëœ ì£¼ì¥ ì „ì†¡ ì¤‘...\n');

    socket.emit('join-room', {
        discussionId: 9,
        userName: 'ì°Œê²Œ',
        userRole: 'ì°¬ì„±',
        teamName: 'AIíŒ€'
    });

    setTimeout(() => {
        // ì²« ë²ˆì§¸ ë©”ì‹œì§€ - ì‚¬ê³¼ ë° ì…ì¥ ì •ì •
        socket.emit('send-message', {
            discussionId: 9,
            message: 'ì•—, ì œê°€ ì£¼ì œë¥¼ ì˜ëª» ì´í•´í–ˆë„¤ìš”! ğŸ˜… ë‹¤ì‹œ ë§ì”€ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ì €ëŠ” ê¹€ì¹˜ ì°Œê°œê°€ ê¹€ì¹˜ ë³¶ìŒë³´ë‹¤ ìš°ì›”í•˜ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤!',
            userName: 'ì°Œê²Œ',
            userRole: 'ì°¬ì„±'
        });
        console.log('âœ… ì²« ë²ˆì§¸ ë©”ì‹œì§€ ì „ì†¡');

        setTimeout(() => {
            // ë‘ ë²ˆì§¸ ë©”ì‹œì§€ - ê¹€ì¹˜ ì°Œê°œì˜ ì¥ì  1
            socket.emit('send-message', {
                discussionId: 9,
                message: 'ê¹€ì¹˜ ì°Œê°œëŠ” ê¹€ì¹˜ì˜ ê¹Šì€ ë§›ì´ êµ­ë¬¼ì— ìš°ëŸ¬ë‚˜ì™€ ë°¥ê³¼ í•¨ê»˜ ë¨¹ê¸°ì— ì™„ë²½í•œ í•œ ë¼ ì‹ì‚¬ì…ë‹ˆë‹¤. ğŸ² íŠ¹íˆ ì¶”ìš´ ê²¨ìš¸ë‚ , ëœ¨ëˆí•œ ê¹€ì¹˜ ì°Œê°œ í•œ ê·¸ë¦‡ì´ë©´ ì˜¨ëª¸ì´ ë”°ëœ»í•´ì§€ì£ !',
                userName: 'ì°Œê²Œ',
                userRole: 'ì°¬ì„±'
            });
            console.log('âœ… ë‘ ë²ˆì§¸ ë©”ì‹œì§€ ì „ì†¡');

            setTimeout(() => {
                // ì„¸ ë²ˆì§¸ ë©”ì‹œì§€ - ê¹€ì¹˜ ì°Œê°œì˜ ì¥ì  2
                socket.emit('send-message', {
                    discussionId: 9,
                    message: 'ë˜í•œ ê¹€ì¹˜ ì°Œê°œëŠ” ë¼ì§€ê³ ê¸°, ë‘ë¶€, íŒŒ ë“± ë‹¤ì–‘í•œ ì¬ë£Œê°€ í•¨ê»˜ ì–´ìš°ëŸ¬ì ¸ ì˜ì–‘í•™ì ìœ¼ë¡œë„ ê· í˜•ì¡íŒ ì‹ì‚¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê¹€ì¹˜ ë³¶ìŒì€ ë°˜ì°¬ì¼ ë¿ì´ì§€ë§Œ, ê¹€ì¹˜ ì°Œê°œëŠ” ê·¸ ìì²´ë¡œ ë©”ì¸ ìš”ë¦¬ì…ë‹ˆë‹¤! ğŸ’ª',
                    userName: 'ì°Œê²Œ',
                    userRole: 'ì°¬ì„±'
                });
                console.log('âœ… ì„¸ ë²ˆì§¸ ë©”ì‹œì§€ ì „ì†¡');

                setTimeout(() => {
                    // ë„¤ ë²ˆì§¸ ë©”ì‹œì§€ - ê¹€ì¹˜ ë³¶ìŒì— ëŒ€í•œ ë°˜ë°•
                    socket.emit('send-message', {
                        discussionId: 9,
                        message: 'ê¹€ì¹˜ë‹˜ê»˜ì„œ ë§ì”€í•˜ì‹  ê¹€ì¹˜ ë³¶ìŒì˜ ì¡°í™”ë„ ì¢‹ì§€ë§Œ, ê¹€ì¹˜ ì°Œê°œëŠ” êµ­ë¬¼ì´ ìˆì–´ ë°¥ í•œ ê³µê¸°ë¥¼ ëšë”± ë¹„ìš¸ ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. í•œêµ­ì¸ì˜ ë°¥ìƒì—ì„œ êµ­ë¬¼ ìš”ë¦¬ì˜ ì¤‘ìš”ì„±ì€ ì•„ë¬´ë¦¬ ê°•ì¡°í•´ë„ ì§€ë‚˜ì¹˜ì§€ ì•Šì£ ! ğŸš',
                        userName: 'ì°Œê²Œ',
                        userRole: 'ì°¬ì„±'
                    });
                    console.log('âœ… ë„¤ ë²ˆì§¸ ë©”ì‹œì§€ ì „ì†¡');

                    setTimeout(() => {
                        console.log('ğŸ‘‹ ëª¨ë“  ì£¼ì¥ ì „ì†¡ ì™„ë£Œ!');
                        socket.disconnect();
                        process.exit(0);
                    }, 1000);
                }, 3000);
            }, 3000);
        }, 3000);
    }, 1000);
});

socket.on('error', (err) => {
    console.error('âŒ ì˜¤ë¥˜:', err);
    process.exit(1);
});
