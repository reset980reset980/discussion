const io = require('socket.io-client');

const socket = io('http://localhost:3001');

socket.on('connect', () => {
    console.log('ğŸ’¬ ì°Œê²Œì˜ ë‹µë³€ ì „ì†¡ ì¤‘...\n');

    // í† ë¡ ë°© 9ë²ˆì— ì…ì¥ (ì´ë¯¸ ì…ì¥í–ˆì§€ë§Œ ì¬ì—°ê²°)
    socket.emit('join-room', {
        discussionId: 9,
        userName: 'ì°Œê²Œ',
        userRole: 'ì°¬ì„±',
        teamName: 'AIíŒ€'
    });

    // 1ì´ˆ í›„ ë©”ì‹œì§€ ì „ì†¡
    setTimeout(() => {
        socket.emit('send-message', {
            discussionId: 9,
            message: 'ê¹€ì¹˜ë‹˜ ì¢‹ì€ ì˜ê²¬ ê°ì‚¬í•©ë‹ˆë‹¤! í•˜ì§€ë§Œ ì €ëŠ” ìƒê¹€ì¹˜ì˜ ì…ì¥ì—ì„œ ë§ì”€ë“œë¦¬ìë©´, ê¹€ì¹˜ ìì²´ê°€ ê°€ì§„ ë°œíš¨ì‹í’ˆìœ¼ë¡œì„œì˜ ê±´ê°•ìƒ ì´ì ê³¼ í”„ë¡œë°”ì´ì˜¤í‹±ìŠ¤ íš¨ê³¼ëŠ” ë³¶ìŒ ê³¼ì •ì—ì„œ ì¼ë¶€ ì†ì‹¤ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ¥¬',
            userName: 'ì°Œê²Œ',
            userRole: 'ì°¬ì„±'
        });
        console.log('âœ… ì²« ë²ˆì§¸ ë‹µë³€ ì „ì†¡ ì™„ë£Œ!');

        // 3ì´ˆ í›„ ì¶”ê°€ ë©”ì‹œì§€
        setTimeout(() => {
            socket.emit('send-message', {
                discussionId: 9,
                message: 'ë¬¼ë¡  ê¹€ì¹˜ë³¶ìŒì˜ ì¥ì ë„ ì¸ì •í•©ë‹ˆë‹¤ë§Œ, ìƒê¹€ì¹˜ì˜ ì•„ì‚­í•œ ì‹ê°ê³¼ ì‹œì›í•œ ë§›ì€ í•œêµ­ ìŒì‹ ë¬¸í™”ì—ì„œ ëŒ€ì²´ ë¶ˆê°€ëŠ¥í•œ ê°€ì¹˜ë¥¼ ì§€ë‹ˆê³  ìˆë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. íŠ¹íˆ ì—¬ë¦„ì²  ì…ë§› ì—†ì„ ë•Œì˜ ìƒê¹€ì¹˜ë§Œ í•œ ê²Œ ì—†ì£ ! ğŸ˜Š',
                userName: 'ì°Œê²Œ',
                userRole: 'ì°¬ì„±'
            });
            console.log('âœ… ë‘ ë²ˆì§¸ ë‹µë³€ ì „ì†¡ ì™„ë£Œ!');

            // ë©”ì‹œì§€ ì „ì†¡ í›„ ì¢…ë£Œ
            setTimeout(() => {
                console.log('ğŸ‘‹ ë‹µë³€ ì „ì†¡ ì™„ë£Œ, ì—°ê²° ì¢…ë£Œ');
                socket.disconnect();
                process.exit(0);
            }, 1000);
        }, 3000);
    }, 1000);
});

socket.on('error', (err) => {
    console.error('âŒ ì˜¤ë¥˜:', err);
    process.exit(1);
});
